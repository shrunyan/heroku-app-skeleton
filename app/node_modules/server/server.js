"use strict"

var http = require('http');
var express = require('express');
var mongoose = require('mongoose');
var bodyParser = require('body-parser');
var app = express();

app.set('port', process.env.PORT || 3000);
app.set('views', __dirname + '/views');

app.engine('html', require('ejs').renderFile);


// Middleware
app.use(bodyParser.json({
	limit: '10mb'
}));
app.use(bodyParser.urlencoded({
	limit: '10mb',
	extended: true
}));
app.use('/', express.static(__dirname + '/../../../dist'));


// Database
if ('development' == app.get('env')) {
	var livereload = require('livereload2');
  		livereload.createServer().watch(__dirname + '/../../../dist');
}
else if ('production' == app.get('env')) {

}


//  Routes
app.get('/', function index(req, res) {
	console.log('Route: index');
	res.render('index.html');
});


// Server
http.createServer(app).listen(app.get('port'), function() {
    console.log('Server up: http://localhost:' + app.get('port'));
});
