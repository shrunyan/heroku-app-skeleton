"use strict"

let http = require('http')
let express = require('express')
let mongoose = require('mongoose')
let bodyParser = require('body-parser')
let app = express()
let routes = require('server/routes')


// App Settings
app.set('port', process.env.PORT || 3000)
app.set('views', __dirname + '/views')
app.engine('html', require('ejs').renderFile)


// Middleware
app.use(bodyParser.json({
	limit: '10mb'
}))

app.use(bodyParser.urlencoded({
	limit: '10mb',
	extended: true
}))

app.use('/', express.static(__dirname + '/../../../dist'))


// Environment
if ('development' == app.get('env')) {
	// var livereload = require('livereload2');
  // 		livereload.createServer().watch(__dirname + '/../../../dist');
}
else if ('production' == app.get('env')) {}


//  Routes
app.get('/', function (req, res) {
	routes.index(req, res)
})


// Server
http.createServer(app).listen(app.get('port'), function() {
    console.log('Server up: http://localhost:' + app.get('port'));
})
